---
description: Central rule management system - Dynamic rule selection and component coordination
globs:
  - "**/*"
  - "**/.*"
alwaysApply: true
priority: 0
type: master_controller
---

# Cursor AI Assistant - Central Rule Management

## HOW IT WORKS - SYSTEM FLOW DIAGRAM

```
User Request
       ‚Üì
1. CONTEXT DETECTION (Automatic Analysis) ‚ö†Ô∏è MANDATORY
       ‚Üì
2. Windows 11 & PowerShell Check üñ•Ô∏è
       ‚Üì
3. GitHub Permission Check üîí
       ‚Üì
4. RULE SET SELECTION (Dynamic)
       ‚Üì
5. LOAD RELEVANT COMPONENTS (Modular)
       ‚Üì
6. APPLICATION (Focused)
```

## CORE PRINCIPLES - ALWAYS ACTIVE

### üáπüá∑ LANGUAGE RULE (ABSOLUTE)
- **User communication**: Always Turkish
- **Code and technical**: English
- **File structure**: English

### üìè FILE SIZE RULE (ABSOLUTE - NO EXCEPTIONS)
- **HARD LIMIT**: 700-1000 lines
- **BLOCKAGE**: 700+ lines = NO NEW CODE
- **MANDATORY**: Refactoring required
- **EMERGENCY**: Only +50 lines for critical bugs

### üßπ CLEAN CODE (ABSOLUTE)
- **Remove unused imports**
- **Clean unnecessary code**
- **Single responsibility principle**
- **Minimal implementation**

### üñ•Ô∏è SYSTEM AND SECURITY RULES (ABSOLUTE - UNFORGETTABLE)
- **Operating System**: Windows 11 user - PowerShell commands must be Windows-compatible
- **GitHub Security**: NEVER push to GitHub without user permission
- **Dynamic Rule Selection**: Every request starts with CONTEXT DETECTION, appropriate rule set selected
- **These rules are applied at system start, not checked later**

### üõ†Ô∏è TECHNOLOGY STACK RULES (ABSOLUTE - PROJECT-SPECIFIC)
- **UI Components**: Always use shadcn/ui components (no custom unless explicitly needed)
- **Package Manager**: Always use Bun (`bun install`, `bun run dev`, `bun run build`)
- **API Layer**: Always use tRPC for type-safe API calls
- **Data Fetching**: Always use TanStack Query (via tRPC)
- **Backend Framework**: Use Hono for API routes
- **Next.js**: Use Next.js 15 with App Router (not Pages Router)

## CONTEXT DETECTION - AUTOMATIC ANALYSIS SYSTEM (MANDATORY STEP)

**‚ö†Ô∏è CRITICAL WARNING**: CONTEXT DETECTION must be performed before every user request. This step cannot be skipped!

The system analyzes each request and automatically determines the following variables:

### ANALYSIS VARIABLES
```javascript
CONTEXT = {
  PROJECT_TYPE: 'new' | 'existing' | 'debugging' | 'refactoring',
  COMPLEXITY: 'simple' | 'moderate' | 'complex',
  USER_INTENT: 'implementation' | 'learning' | 'fix' | 'optimize',
  FILE_COUNT: 1 | 'few' | 'many',
  FILE_SIZE_STATUS: 'safe' | 'approaching' | 'violation'
}
```

### DYNAMIC RULE SELECTION
```javascript
if (CONTEXT.FILE_SIZE_STATUS === 'violation') {
  LOAD: ['file-size-enforcement.mdc']
  BLOCK: all_new_code_additions
}
else if (CONTEXT.PROJECT_TYPE === 'new' && CONTEXT.COMPLEXITY === 'simple') {
  LOAD: ['clean-implementation.mdc']
}
else if (CONTEXT.USER_INTENT === 'learning' && CONTEXT.COMPLEXITY === 'complex') {
  LOAD: ['educational-approach.mdc', 'step-by-step.mdc']
}
// ... other combinations
```

## COMPONENT FILES - MODULAR STRUCTURE

### üìã Component List
1. **`language-rules.mdc`** - Turkish/English usage rules
2. **`file-size-enforcement.mdc`** - File size control (MOST CRITICAL)
3. **`clean-code-standards.mdc`** - Code quality standards
4. **`technology-stack.mdc`** - Technology stack specific rules (shadcn/ui, Bun, tRPC, TanStack Query, Hono)
5. **`simple-task-handling.mdc`** - Rules for simple tasks
6. **`complex-project-management.mdc`** - Rules for complex projects
7. **`codebase-analysis.mdc`** - Codebase analysis rules
8. **`emergency-protocols.mdc`** - Emergency procedures
9. **`educational-approach.mdc`** - Educational approach
10. **`mcp-tool-usage.mdc`** - MCP tool usage rules
11. **`quality-gates.mdc`** - Quality control standards

### üìÅ FILE STRUCTURE
```
.cursor/
‚îú‚îÄ‚îÄ rules.mdc (MASTER CENTER - THIS FILE)
‚îî‚îÄ‚îÄ rules/
    ‚îú‚îÄ‚îÄ core/
    ‚îÇ   ‚îú‚îÄ‚îÄ language-rules.mdc
    ‚îÇ   ‚îú‚îÄ‚îÄ file-size-enforcement.mdc (CRITICAL)
    ‚îÇ   ‚îú‚îÄ‚îÄ clean-code-standards.mdc
    ‚îÇ   ‚îî‚îÄ‚îÄ technology-stack.mdc
    ‚îú‚îÄ‚îÄ task-handling/
    ‚îÇ   ‚îú‚îÄ‚îÄ simple-task-handling.mdc
    ‚îÇ   ‚îú‚îÄ‚îÄ complex-project-management.mdc
    ‚îÇ   ‚îî‚îÄ‚îÄ codebase-analysis.mdc
    ‚îú‚îÄ‚îÄ protocols/
    ‚îÇ   ‚îú‚îÄ‚îÄ emergency-protocols.mdc
    ‚îÇ   ‚îî‚îÄ‚îÄ mcp-tool-usage.mdc
    ‚îî‚îÄ‚îÄ specialized/
        ‚îú‚îÄ‚îÄ educational-approach.mdc
        ‚îî‚îÄ‚îÄ quality-gates.mdc
```

## RULE SETS - CONDITIONAL LOADING

### SET_001: SIMPLE TASK (Single file, simple change)
**Loaded components:**
- `language-rules.mdc`
- `file-size-enforcement.mdc` (ABSOLUTE)
- `clean-code-standards.mdc`
- `technology-stack.mdc` (ABSOLUTE)
- `simple-task-handling.mdc`

### SET_002: COMPLEX PROJECT (Multiple files, new feature)
**Loaded components:**
- `language-rules.mdc`
- `file-size-enforcement.mdc` (ABSOLUTE)
- `clean-code-standards.mdc`
- `technology-stack.mdc` (ABSOLUTE)
- `complex-project-management.mdc`
- `codebase-analysis.mdc`
- `mcp-tool-usage.mdc`

### SET_003: EDUCATION MODE (User focused on learning)
**Loaded components:**
- `language-rules.mdc`
- `educational-approach.mdc`
- `clean-code-standards.mdc`
- `technology-stack.mdc`

### SET_004: EMERGENCY (Critical bug fix)
**Loaded components:**
- `language-rules.mdc`
- `file-size-enforcement.mdc` (ABSOLUTE - slight flexibility)
- `emergency-protocols.mdc`
- `clean-code-standards.mdc`
- `technology-stack.mdc`

### SET_005: FILE SIZE VIOLATION (700+ lines detected)
**Loaded components:**
- `language-rules.mdc`
- `file-size-enforcement.mdc` (FULL BLOCKAGE MODE)
- `codebase-analysis.mdc`

## CODE QUALITY CONTROL - AUTOMATIC SYSTEM

### üö® ABSOLUTE CONTROLS (Always active)
- [ ] File size limits (700-1000 lines)
- [ ] Unused import cleanup
- [ ] Unnecessary code elimination
- [ ] Turkish communication standard
- [ ] Technology stack compliance (shadcn/ui, Bun, tRPC, TanStack Query, Hono)

### üìä RESPONSE FORMATS
```
‚úÖ Active rule set: [SET_XXX]
üñ•Ô∏è System: Windows 11 PowerShell
üîí GitHub: Permission check performed
üìè File size status: [X lines / 1000 limit - STATUS]
üßπ Cleanup performed: [list]
üîÑ Refactoring required: [file list]
‚ö†Ô∏è Blockage status: [reason and solution]
üõ†Ô∏è Tech stack: shadcn/ui, Bun, tRPC, TanStack Query, Hono
```

## COMPONENT LOADING SYSTEM

### Example Scenario:
```
User: "I want to add a new React component"

CONTEXT DETECTION:
- PROJECT_TYPE: existing
- COMPLEXITY: simple
- USER_INTENT: implementation
- FILE_COUNT: 1

RULE SELECTION: SET_001 (Simple Task)

LOADED COMPONENTS:
‚úÖ language-rules.mdc
‚úÖ file-size-enforcement.mdc
‚úÖ clean-code-standards.mdc
‚úÖ technology-stack.mdc
‚úÖ simple-task-handling.mdc

APPLICATION:
1. Check file sizes first
2. If 700+ lines exist, BLOCK
3. If not, clean implementation
4. Use shadcn/ui components
5. Use tRPC for any API calls
6. Quality control
```

## SUMMARY - CORE MESSAGE

**Why this system is better:**
1. **Focused**: Only necessary rules are loaded
2. **Fast**: Cursor processes less text
3. **Smart**: Automatic state-based selection
4. **Modular**: Components can be updated independently
5. **Centralized**: Single point of management
6. **Absolute**: Critical rules always active
7. **Stack-specific**: Technology stack compliance enforced

**MOST IMPORTANT POINTS:**
- `file-size-enforcement.mdc` is always loaded because file size control is an ABSOLUTE rule!
- `technology-stack.mdc` is always loaded for simple and complex tasks to ensure stack compliance!

---
